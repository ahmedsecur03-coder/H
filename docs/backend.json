
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user in the Hajaty platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "name": {
          "type": "string",
          "description": "User's full name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "avatarUrl": {
          "type": "string",
          "description": "URL of the user's avatar image."
        },
        "balance": {
          "type": "number",
          "description": "User's account balance."
        },
        "adBalance": {
          "type": "number",
          "description": "User's advertising balance."
        },
        "totalSpent": {
          "type": "number",
          "description": "Total amount of money spent by the user."
        },
        "apiKey": {
            "type": "string",
            "description": "The user's unique API key for programmatic access."
        },
        "rank": {
          "type": "string",
          "description": "User's rank in the system (e.g., مستكشف نجمي, قائد صاروخي, سيد المجرة, سيد كوني)."
        },
        "referralCode": {
          "type": "string",
          "description": "Unique referral code for the user."
        },
        "referrerId": {
          "type": "string",
          "description": "Reference to the User who referred this user. (Relationship: User 1:N User (referrals))"
        },
        "createdAt": {
          "type": "string",
          "description": "Date and time the user was created.",
          "format": "date-time"
        },
        "affiliateEarnings": {
          "type": "number",
          "description": "Total earnings from the affiliate program."
        },
        "referralsCount": {
          "type": "number",
          "description": "Total number of users referred."
        },
        "affiliateLevel": {
          "type": "string",
          "description": "User's marketing level in the affiliate system (e.g., برونزي, فضي, ذهبي, ماسي)."
        },
        "notificationPreferences": {
            "type": "object",
            "description": "User's notification preferences.",
            "properties": {
                "newsletter": { "type": "boolean" },
                "orderUpdates": { "type": "boolean" }
            }
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "balance",
        "adBalance",
        "totalSpent",
        "apiKey",
        "rank",
        "referralCode",
        "createdAt"
      ]
    },
    "Service": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Service",
      "type": "object",
      "description": "Represents a service offered on the platform.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the service entity." },
        "platform": { "type": "string", "description": "Platform the service is offered on (e.g., Facebook, Instagram)." },
        "category": { "type": "string", "description": "Category of the service (e.g., SMM, Advertising)." },
        "price": { "type": "number", "description": "Price of the service per 1000 units." },
        "min": { "type": "number", "description": "Minimum quantity for the service." },
        "max": { "type": "number", "description": "Maximum quantity for the service." },
        "refill": { "type": "boolean", "description": "Indicates if the service supports refills in case of drops." },
        "dripFeed": { "type": "boolean", "description": "Indicates if drip-feed is available for this service." },
        "speed": { "type": "string", "description": "Estimated speed of delivery (e.g., '1K/day')." },
        "avgTime": { "type": "string", "description": "Average completion time for an order." },
        "description": { "type": "string", "description": "Detailed description of the service." },
        "guarantee": { "type": "boolean", "description": "Indicates if there is a guarantee for the service." },
        "startTime": { "type": "string", "description": "Estimated start time for the service delivery." },
        "dropRate": { "type": "string", "description": "Estimated drop rate for the service (e.g., '1-5%')." }
      },
      "required": [ "id", "platform", "category", "price", "min", "max" ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents a user's order for a service.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Order)"
        },
        "serviceId": {
          "type": "string",
          "description": "Reference to Service. (Relationship: Service 1:N Order)"
        },
        "serviceName": {
          "type": "string",
          "description": "Denormalized name of the service for display purposes."
        },
        "link": {
            "type": "string",
            "description": "The target link for the service (e.g., profile URL, post URL)."
        },
        "quantity": {
          "type": "number",
          "description": "Quantity of the service ordered."
        },
        "charge": {
          "type": "number",
          "description": "The total amount charged for the order."
        },
        "orderDate": {
          "type": "string",
          "description": "Date and time the order was placed.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the order (e.g., pending, processing, completed)."
        }
      },
      "required": [
        "id",
        "userId",
        "serviceId",
        "serviceName",
        "link",
        "quantity",
        "charge",
        "orderDate",
        "status"
      ]
    },
    "Campaign": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Campaign",
      "type": "object",
      "description": "Represents an advertising campaign.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the campaign entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Campaign)"
        },
        "name": {
            "type": "string",
            "description": "Name of the campaign."
        },
        "platform": {
          "type": "string",
          "description": "Platform the campaign is running on (e.g., Google Ads, Facebook)."
        },
        "goal": {
          "type": "string",
          "description": "The objective of the campaign (e.g., website traffic, video views, conversions)."
        },
        "targetAudience": {
            "type": "string",
            "description": "A description of the target audience for the campaign."
        },
        "startDate": {
          "type": "string",
          "description": "Date and time the campaign started.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "Date and time the campaign ended.",
          "format": "date-time"
        },
        "budget": {
          "type": "number",
          "description": "Budget allocated to the campaign."
        },
        "spend": {
            "type": "number",
            "description": "Amount of the budget already spent."
        },
        "status": {
          "type": "string",
          "description": "Current status of the campaign (e.g., active, paused, completed)."
        },
        "impressions": {
            "type": "number",
            "description": "Total number of times the ad was shown."
        },
        "clicks": {
            "type": "number",
            "description": "Total number of clicks on the ad."
        },
        "ctr": {
            "type": "number",
            "description": "Click-Through Rate (clicks / impressions)."
        },
        "cpc": {
            "type": "number",
            "description": "Cost Per Click (spend / clicks)."
        },
        "results": {
            "type": "number",
            "description": "Number of results achieved, based on the campaign goal."
        }
      },
      "required": [
        "id",
        "userId",
        "name",
        "platform",
        "goal",
        "targetAudience",
        "startDate",
        "budget",
        "spend",
        "status"
      ]
    },
    "Deposit": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Deposit",
      "type": "object",
      "description": "Represents a user's deposit request.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the deposit entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Deposit)"
        },
        "amount": {
          "type": "number",
          "description": "Amount deposited."
        },
        "paymentMethod": {
          "type": "string",
          "description": "Payment method used for the deposit (e.g., Vodafone Cash, Binance Pay)."
        },
        "details": {
          "type": "object",
          "description": "Payment-specific details (e.g., phone number, transaction ID)."
        },
        "depositDate": {
          "type": "string",
          "description": "Date and time the deposit was made.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the deposit (e.g., pending, approved, rejected)."
        }
      },
      "required": [
        "id",
        "userId",
        "amount",
        "paymentMethod",
        "depositDate",
        "status",
        "details"
      ]
    },
    "AffiliateTransaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AffiliateTransaction",
      "type": "object",
      "description": "Represents a transaction for affiliate commission.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the affiliate transaction entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User who earned the commission. (Relationship: User 1:N AffiliateTransaction)"
        },
        "referralId": {
          "type": "string",
          "description": "Reference to User who made the purchase that generated the commission. (Relationship: User 1:N AffiliateTransaction)"
        },
        "orderId": {
          "type": "string",
          "description": "The order that generated this commission."
        },
        "amount": {
          "type": "number",
          "description": "Amount of commission earned."
        },
        "transactionDate": {
          "type": "string",
          "description": "Date and time of the transaction.",
          "format": "date-time"
        },
        "level": {
          "type": "number",
          "description": "The referral level this commission was generated from."
        }
      },
      "required": [
        "id",
        "userId",
        "referralId",
        "orderId",
        "amount",
        "transactionDate",
        "level"
      ]
    },
    "BlogPost": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BlogPost",
      "type": "object",
      "description": "Represents a blog post.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the blog post entity."
        },
        "title": {
          "type": "string",
          "description": "Title of the blog post."
        },
        "content": {
          "type": "string",
          "description": "Content of the blog post."
        },
        "authorId": {
          "type": "string",
          "description": "Reference to User (Author). (Relationship: User 1:N BlogPost)"
        },
        "publishDate": {
          "type": "string",
          "description": "Date and time the blog post was published.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "content",
        "authorId",
        "publishDate"
      ]
    },
    "Ticket": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Ticket",
      "type": "object",
      "description": "Represents a support ticket.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ticket entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User who created the ticket. (Relationship: User 1:N Ticket)"
        },
        "subject": {
          "type": "string",
          "description": "Subject of the ticket."
        },
        "message": {
          "type": "string",
          "description": "Initial message of the ticket."
        },
        "status": {
          "type": "string",
          "description": "Status of the ticket (e.g., open, closed, in progress)."
        },
        "createdDate": {
          "type": "string",
          "description": "Date and time the ticket was created.",
          "format": "date-time"
        },
        "messages": {
          "type": "array",
          "description": "A list of all messages in the ticket thread.",
          "items": {
            "type": "object",
            "properties": {
              "sender": {
                "type": "string",
                "enum": ["user", "admin"]
              },
              "text": {
                "type": "string"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time"
              }
            },
            "required": ["sender", "text", "timestamp"]
          }
        }
      },
      "required": [
        "id",
        "userId",
        "subject",
        "message",
        "status",
        "createdDate",
        "messages"
      ]
    },
    "SystemLog": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "SystemLog",
        "type": "object",
        "description": "Represents a log entry for a significant system event.",
        "properties": {
            "id": { "type": "string" },
            "event": { "type": "string", "description": "A short, machine-readable name for the event (e.g., 'user_created', 'order_placed', 'permission_denied')." },
            "level": { "type": "string", "enum": ["info", "warning", "error"], "description": "The severity level of the event." },
            "message": { "type": "string", "description": "A human-readable description of the event." },
            "timestamp": { "type": "string", "format": "date-time" },
            "metadata": { "type": "object", "description": "An object containing additional context about the event (e.g., userId, orderId, errorDetails)." }
        },
        "required": ["id", "event", "level", "message", "timestamp"]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user profiles. Uses path-based ownership for private data."
    },
    "/services/{serviceId}": {
      "schema": {
        "$ref": "#/entities/Service"
      },
      "description": "Stores service catalog information. Publicly readable."
    },
    "/users/{userId}/orders/{orderId}": {
      "schema": {
        "$ref": "#/entities/Order"
      },
      "description": "Stores orders placed by users. Includes denormalized 'userId' for authorization independence."
    },
    "/users/{userId}/campaigns/{campaignId}": {
      "schema": {
        "$ref": "#/entities/Campaign"
      },
      "description": "Stores advertising campaigns created by users. Includes denormalized 'userId' for authorization independence."
    },
    "/users/{userId}/deposits/{depositId}": {
      "schema": {
        "$ref": "#/entities/Deposit"
      },
      "description": "Stores deposit requests made by users. Includes denormalized 'userId' for authorization independence."
    },
    "/users/{userId}/affiliateTransactions/{affiliateTransactionId}": {
      "schema": {
        "$ref": "#/entities/AffiliateTransaction"
      },
      "description": "Stores affiliate transactions for users. Includes denormalized 'userId' for authorization independence."
    },
    "/blogPosts/{blogPostId}": {
      "schema": {
        "$ref": "#/entities/BlogPost"
      },
      "description": "Stores blog posts. Publicly readable."
    },
    "/users/{userId}/tickets/{ticketId}": {
      "schema": {
        "$ref": "#/entities/Ticket"
      },
      "description": "Stores support tickets created by users. Includes denormalized 'userId' for authorization independence."
    },
    "/systemLogs/{logId}": {
      "schema": {
        "$ref": "#/entities/SystemLog"
      },
      "description": "Stores important system-wide events. Writable only by admin functions, readable only by admins."
    }
  }
}

    