{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user in the Hajaty platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "name": {
          "type": "string",
          "description": "User's full name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "avatarUrl": {
          "type": "string",
          "description": "URL of the user's avatar image."
        },
        "balance": {
          "type": "number",
          "description": "User's account balance."
        },
        "adBalance": {
          "type": "number",
          "description": "User's advertising balance."
        },
        "totalSpent": {
          "type": "number",
          "description": "Total amount of money spent by the user."
        },
        "rank": {
          "type": "string",
          "description": "User's rank in the system (e.g., مستكشف نجمي, قائد صاروخي, سيد المجرة, سيد كوني)."
        },
        "referralCode": {
          "type": "string",
          "description": "Unique referral code for the user."
        },
        "referrerId": {
          "type": "string",
          "description": "Reference to the User who referred this user. (Relationship: User 1:N User (referrals))"
        },
        "createdAt": {
          "type": "string",
          "description": "Date and time the user was created.",
          "format": "date-time"
        },
        "affiliateEarnings": {
          "type": "number",
          "description": "Total earnings from the affiliate program."
        },
        "referralsCount": {
          "type": "number",
          "description": "Total number of users referred."
        },
        "affiliateLevel": {
          "type": "string",
          "description": "User's marketing level in the affiliate system (e.g., برونزي, فضي, ذهبي, ماسي)."
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "balance",
        "adBalance",
        "totalSpent",
        "rank",
        "referralCode",
        "createdAt"
      ]
    },
    "Service": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Service",
      "type": "object",
      "description": "Represents a service offered on the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the service entity."
        },
        "platform": {
          "type": "string",
          "description": "Platform the service is offered on (e.g., Facebook, Instagram)."
        },
        "category": {
          "type": "string",
          "description": "Category of the service (e.g., SMM, Advertising)."
        },
        "price": {
          "type": "number",
          "description": "Price of the service."
        },
        "min": {
          "type": "number",
          "description": "Minimum quantity for the service."
        },
        "max": {
          "type": "number",
          "description": "Maximum quantity for the service."
        }
      },
      "required": [
        "id",
        "platform",
        "category",
        "price",
        "min",
        "max"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents a user's order for a service.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Order)"
        },
        "serviceId": {
          "type": "string",
          "description": "Reference to Service. (Relationship: Service 1:N Order)"
        },
        "serviceName": {
          "type": "string",
          "description": "Denormalized name of the service for display purposes."
        },
        "link": {
            "type": "string",
            "description": "The target link for the service (e.g., profile URL, post URL)."
        },
        "quantity": {
          "type": "number",
          "description": "Quantity of the service ordered."
        },
        "charge": {
          "type": "number",
          "description": "The total amount charged for the order."
        },
        "orderDate": {
          "type": "string",
          "description": "Date and time the order was placed.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the order (e.g., pending, processing, completed)."
        }
      },
      "required": [
        "id",
        "userId",
        "serviceId",
        "serviceName",
        "link",
        "quantity",
        "charge",
        "orderDate",
        "status"
      ]
    },
    "Campaign": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Campaign",
      "type": "object",
      "description": "Represents an advertising campaign.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the campaign entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Campaign)"
        },
        "name": {
            "type": "string",
            "description": "Name of the campaign."
        },
        "platform": {
          "type": "string",
          "description": "Platform the campaign is running on (e.g., Google Ads, Facebook)."
        },
        "startDate": {
          "type": "string",
          "description": "Date and time the campaign started.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "Date and time the campaign ended.",
          "format": "date-time"
        },
        "budget": {
          "type": "number",
          "description": "Budget allocated to the campaign."
        },
        "spend": {
            "type": "number",
            "description": "Amount of the budget already spent."
        },
        "status": {
          "type": "string",
          "description": "Current status of the campaign (e.g., active, paused, completed)."
        }
      },
      "required": [
        "id",
        "userId",
        "name",
        "platform",
        "startDate",
        "budget",
        "spend",
        "status"
      ]
    },
    "Deposit": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Deposit",
      "type": "object",
      "description": "Represents a user's deposit request.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the deposit entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Deposit)"
        },
        "amount": {
          "type": "number",
          "description": "Amount deposited."
        },
        "paymentMethod": {
          "type": "string",
          "description": "Payment method used for the deposit (e.g., Vodafone Cash, Binance Pay)."
        },
        "details": {
          "type": "object",
          "description": "Payment-specific details (e.g., phone number, transaction ID)."
        },
        "depositDate": {
          "type": "string",
          "description": "Date and time the deposit was made.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the deposit (e.g., pending, approved, rejected)."
        }
      },
      "required": [
        "id",
        "userId",
        "amount",
        "paymentMethod",
        "depositDate",
        "status",
        "details"
      ]
    },
    "AffiliateTransaction": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AffiliateTransaction",
      "type": "object",
      "description": "Represents a transaction for affiliate commission.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the affiliate transaction entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User who earned the commission. (Relationship: User 1:N AffiliateTransaction)"
        },
        "referralId": {
          "type": "string",
          "description": "Reference to User who made the purchase that generated the commission. (Relationship: User 1:N AffiliateTransaction)"
        },
        "orderId": {
          "type": "string",
          "description": "The order that generated this commission."
        },
        "amount": {
          "type": "number",
          "description": "Amount of commission earned."
        },
        "transactionDate": {
          "type": "string",
          "description": "Date and time of the transaction.",
          "format": "date-time"
        },
        "level": {
          "type": "number",
          "description": "The referral level this commission was generated from."
        }
      },
      "required": [
        "id",
        "userId",
        "referralId",
        "orderId",
        "amount",
        "transactionDate"
      ]
    },
    "BlogPost": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BlogPost",
      "type": "object",
      "description": "Represents a blog post.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the blog post entity."
        },
        "title": {
          "type": "string",
          "description": "Title of the blog post."
        },
        "content": {
          "type": "string",
          "description": "Content of the blog post."
        },
        "authorId": {
          "type": "string",
          "description": "Reference to User (Author). (Relationship: User 1:N BlogPost)"
        },
        "publishDate": {
          "type": "string",
          "description": "Date and time the blog post was published.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "content",
        "authorId",
        "publishDate"
      ]
    },
    "Ticket": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Ticket",
      "type": "object",
      "description": "Represents a support ticket.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ticket entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User who created the ticket. (Relationship: User 1:N Ticket)"
        },
        "subject": {
          "type": "string",
          "description": "Subject of the ticket."
        },
        "message": {
          "type": "string",
          "description": "Initial message of the ticket."
        },
        "status": {
          "type": "string",
          "description": "Status of the ticket (e.g., open, closed, in progress)."
        },
        "createdDate": {
          "type": "string",
          "description": "Date and time the ticket was created.",
          "format": "date-time"
        },
        "messages": {
          "type": "array",
          "description": "A list of all messages in the ticket thread.",
          "items": {
            "type": "object",
            "properties": {
              "sender": {
                "type": "string",
                "enum": ["user", "admin"]
              },
              "text": {
                "type": "string"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time"
              }
            },
            "required": ["sender", "text", "timestamp"]
          }
        }
      },
      "required": [
        "id",
        "userId",
        "subject",
        "message",
        "status",
        "createdDate",
        "messages"
      ]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user profiles. Uses path-based ownership for private data."
    },
    "/services/{serviceId}": {
      "schema": {
        "$ref": "#/entities/Service"
      },
      "description": "Stores service catalog information. Publicly readable."
    },
    "/users/{userId}/orders/{orderId}": {
      "schema": {
        "$ref": "#/entities/Order"
      },
      "description": "Stores orders placed by users. Includes denormalized 'userId' for authorization independence."
    },
    "/users/{userId}/campaigns/{campaignId}": {
      "schema": {
        "$ref": "#/entities/Campaign"
      },
      "description": "Stores advertising campaigns created by users. Includes denormalized 'userId' for authorization independence."
    },
    "/users/{userId}/deposits/{depositId}": {
      "schema": {
        "$ref": "#/entities/Deposit"
      },
      "description": "Stores deposit requests made by users. Includes denormalized 'userId' for authorization independence."
    },
    "/users/{userId}/affiliateTransactions/{affiliateTransactionId}": {
      "schema": {
        "$ref": "#/entities/AffiliateTransaction"
      },
      "description": "Stores affiliate transactions for users. Includes denormalized 'userId' for authorization independence."
    },
    "/blogPosts/{blogPostId}": {
      "schema": {
        "$ref": "#/entities/BlogPost"
      },
      "description": "Stores blog posts. Publicly readable."
    },
    "/users/{userId}/tickets/{ticketId}": {
      "schema": {
        "$ref": "#/entities/Ticket"
      },
      "description": "Stores support tickets created by users. Includes denormalized 'userId' for authorization independence."
    }
  }
}
