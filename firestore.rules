rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Helper function to check if the authenticated user is the admin.
    function isAdmin() {
      return request.auth.token.email == 'hagaaty@gmail.com';
    }

    // Rule for Admins: Admins can do anything, anywhere. This rule is checked first.
    match /{document=**} {
      allow read, write: if isAdmin();
    }
    
    // Default permissive rule for all other users to prevent permission errors during development.
    // This is less specific than the admin rule, so it's checked second.
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
